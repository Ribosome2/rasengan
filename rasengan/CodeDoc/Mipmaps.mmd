Mind Map generated by NB MindMap plugin   
> __version__=`1.1`,showJumps=`true`
---

# Root topic

## 最大mipmap等级：<br/>std::log2\(std::max\(texWidth, texHeight\)

## mipmap生成
> leftSide=`true`


### vkCmdBlitImage

#### 这是一个transfer操作

#### 创建VkImage的时候要使用<br/>VK\_IMAGE\_USAGE\_TRANSFER\_SRC\_BIT<br/>来当transfer的源

#### 目标VkImage layout 为<br/>VK\_IMAGE\_LAYOUT\_TRANSFER\_DST\_OPTIMAL<br/>生成Mipmap效率最高
> leftSide=`true`


## 具体的指令流程
> leftSide=`true`


### 创建CommandBuffer

### 录制CommandBuffer
> leftSide=`true`


#### 先创建VkImageMemoryBarrier

#### 从1开始mipLevels<br/>循环生成每一级的Mipmap
> leftSide=`true`


##### 设置barrier\.subresourceRange\.baseMipLevel=i\-1

##### vkCmdPipelineBarrier

##### VkImageBlit 设置blit操作的参数

###### 主要是设置用前一级的mipmap<br/>做下一级的source

###### 用什么样的VkFilter生成小图

##### vkCmdBlitImage
> leftSide=`true`


##### vkCmdPipelineBarrier
> leftSide=`true`


###### 把上一个mipmap图转成<br/>VK\_IMAGE\_LAYOUT\_SHADER\_READ\_ONLY\_OPTIMAL<br/>

##### 宽高砍半
> leftSide=`true`


### 提交录制的CommandBuffer
> leftSide=`true`

